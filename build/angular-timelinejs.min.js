/*! angular-timelinejs 2014-05-07 */
"use strict";angular.module("pippTimelineDirectives",[]).directive("pippTimelineJS",function(){return{template:'<div id="pipp-timeline"></div>',restrict:"E",scope:{source:"=",width:"@",height:"@",startZoomAdjust:"@",startAtEnd:"@",startAtSlide:"@",hashBookmark:"@",font:"@",lang:"@",thumbnailUrl:"@",state:"=",debug:"@"},link:function(a,b){var c,d=void 0===a.width?"960":a.width,e=void 0===a.height?"540":a.height,f={source:a.source};a.type&&(f.type=a.type),a.embedId&&(f.embed_id=a.embedId),a.embed&&(f.embed=a.embed),"true"===a.startAtEnd&&(f.start_at_end=!0),f.start_at_end=!1,a.startZoomAdjust&&(f.start_zoom_adjust=a.startZoomAdjust),a.startAtSlide&&(f.start_at_slide=a.startAtSlide),f.hash_bookmark="true"===a.hashBookmark?!0:!1,a.font&&(f.font=a.font),a.thumbnailUrl&&(f.thumbnail_url=a.thumbnailUrl),VMM.debug="true"===a.debug?!0:!1,console.log("Timeline Configuration: ",f);var g=function(b){b&&!c?(console.log("Initializing Timeline"),f.source=b,c=new VMM.Timeline("pipp-timeline",d,e),c.init(f),console.log("VMM.Timeline object: ",c)):b&&c&&(console.log("Reloading Timeline"),a.state.index?c.reload(b,a.state.index):c.reload(b))};a.$watch("source",function(a){return a?void g(a):void console.log("Waiting for source data")}),g(a.source),a.$watch("state.index",function(b){console.log("Detected state change"),b&&g(a.source)}),console.log("Listening to Events");var h=function(b){console.log("Click event: ",b),a.state.index=c.get_config().current_slide,console.log("Index: ",a.state.index)};b.on("click",".nav-next",function(a){h(a)}),b.on("click",".nav-previous",function(a){h(a)}),b.on("click",".marker",function(a){h(a)})}}});